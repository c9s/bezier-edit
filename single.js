var x$;x$=angular.module("main",[]),x$.controller("main",["$scope"].concat(function(n){var r,o,t,e,c,a,d,l;for(r=[1024,600,60],o=r[0],t=r[1],e=r[2],n.chosen=null,n.nodes=[],n.remove=function(){return"number"==typeof n.chosen&&n.chosen<n.nodes.length?(n.nodes.splice(n.chosen,1),n.chosen=void 0):n.nodes.splice(0,1),l()},n.random=function(){return c(),l()},c=function(r){var c;return c={},c.anchor="undefined"!=typeof r?[e+(o-2*e)*(r%2),e+50*r]:[Math.random()*(o-2*e)+e,Math.random()*(t-2*e)+e],c.ctrl1=[100*Math.random()-50,100*Math.random()-50],c.ctrl2=[100*Math.random()-50,100*Math.random()-50],n.nodes.push(c)},a=0;6>a;++a)d=a,c(d);return l=function(){var r,o,t,e,c,a,d,l,h,s;for(r="M"+n.nodes[0].anchor[0]+" "+n.nodes[0].anchor[1],o=n.nodes[0],t=1,e=n.nodes.length;e>t;++t)c=t,a=n.nodes[c],d=o.anchor[0]+o.ctrl2[0],l=o.anchor[1]+o.ctrl2[1],h=a.anchor[0]+a.ctrl1[0],s=a.anchor[1]+a.ctrl1[1],r+="C"+d+" "+l+" "+h+" "+s+" "+a.anchor[0]+" "+a.anchor[1],o=a;return n.path=r},n.$watch("nodes",function(){return l()}),n.ptrctrl={down:function(r){var o,t,e;for(o=$(r.target),(o.attr("class")||"").split(" ").indexOf("ctrl")>=0&&(n.ctrl=o.attr("ctrl"));o&&!o.attr("idx")&&(o=$(o.parent()),"BODY"!==(t=o[0].nodeName)&&"SVG"!==t););return(e=o.attr("idx"))?n.idx=n.chosen=parseInt(e):void 0},move:function(r){var o;return o=n.nodes[n.idx],o&&!n.ctrl&&(o.anchor[0]=r.offsetX,o.anchor[1]=r.offsetY,l()),o&&n.ctrl?(o["ctrl"+n.ctrl][0]=r.offsetX-o.anchor[0],o["ctrl"+n.ctrl][1]=r.offsetY-o.anchor[1],l()):void 0},mup:function(){return n.idx=null,n.ctrl=null},keydown:function(r){var o;return o=r.keyCode||r.which,8===o?(r.preventDefault(),n.remove()):void 0},keypress:function(){}}}));