var x$;x$=angular.module("main",[]),x$.controller("main",["$scope"].concat(function(r){var n,t,o,a,c,e,d,l;for(n=[1024,600,60],t=n[0],o=n[1],a=n[2],r.nodes=[],r.remove=function(){return r.nodes.splice(0,1),l()},r.random=function(){return c(),l()},c=function(n){var c;return c={},c.anchor="undefined"!=typeof n?[a+(t-2*a)*(n%2),a+50*n]:[Math.random()*(t-2*a)+a,Math.random()*(o-2*a)+a],c.ctrl1=[100*Math.random()-50,100*Math.random()-50],c.ctrl2=[100*Math.random()-50,100*Math.random()-50],r.nodes.push(c)},e=0;6>e;++e)d=e,c(d);return l=function(){var n,t,o,a,c,e,d,l,u,f;for(n="M"+r.nodes[0].anchor[0]+" "+r.nodes[0].anchor[1],t=r.nodes[0],o=1,a=r.nodes.length;a>o;++o)c=o,e=r.nodes[c],d=t.anchor[0]+t.ctrl2[0],l=t.anchor[1]+t.ctrl2[1],u=e.anchor[0]+e.ctrl1[0],f=e.anchor[1]+e.ctrl1[1],n+="C"+d+" "+l+" "+u+" "+f+" "+e.anchor[0]+" "+e.anchor[1],t=e;return r.path=n},r.$watch("nodes",function(){return l()}),r.ptrctrl={down:function(n){var t,o,a;for(t=$(n.target),(t.attr("class")||"").split(" ").indexOf("ctrl")>=0&&(r.ctrl=t.attr("ctrl"));t&&!t.attr("idx")&&(t=$(t.parent()),"BODY"!==(o=t[0].nodeName)&&"SVG"!==o););return(a=t.attr("idx"))?r.idx=parseInt(a):void 0},move:function(n){var t;return t=r.nodes[r.idx],t&&!r.ctrl&&(t.anchor[0]=n.offsetX,t.anchor[1]=n.offsetY,l()),t&&r.ctrl?(t["ctrl"+r.ctrl][0]=n.offsetX-t.anchor[0],t["ctrl"+r.ctrl][1]=n.offsetY-t.anchor[1],l()):void 0},mup:function(){return r.idx=null,r.ctrl=null}}}));