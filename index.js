var x$;x$=angular.module("main",["firebase"]),x$.controller("main",["$scope","$firebaseArray"].concat(function(n,r){var o,e,t,a,c,d,s,i;return o=new Firebase("https://aidraw.firebaseio.com/points"),e=r(o),e.$watch(function(){return i()}),t=[1024,600,60],a=t[0],c=t[1],d=t[2],n.chosen=null,n.nodes=e,n.remove=function(){return"number"==typeof n.chosen&&n.chosen<n.nodes.length?(n.nodes.$remove(n.chosen),n.chosen=void 0):n.nodes.$remove(0),i()},n.random=function(){return s(),i()},s=function(r){var o;return o={},o.anchor="undefined"!=typeof r?[d+(a-2*d)*(r%2),d+50*r]:[Math.random()*(a-2*d)+d,Math.random()*(c-2*d)+d],o.ctrl1=[100*Math.random()-50,100*Math.random()-50],o.ctrl2=[100*Math.random()-50,100*Math.random()-50],n.nodes.$add(o)},i=function(){var r,o,e,t,a,c,d,s,i,h;if(0!==n.nodes.length){for(r="M"+n.nodes[0].anchor[0]+" "+n.nodes[0].anchor[1],o=n.nodes[0],e=1,t=n.nodes.length;t>e;++e)a=e,c=n.nodes[a],d=o.anchor[0]+o.ctrl2[0],s=o.anchor[1]+o.ctrl2[1],i=c.anchor[0]+c.ctrl1[0],h=c.anchor[1]+c.ctrl1[1],r+="C"+d+" "+s+" "+i+" "+h+" "+c.anchor[0]+" "+c.anchor[1],o=c;return n.path=r}},n.$watch("nodes",function(){return i()}),n.ptrctrl={down:function(r){var o,e,t;for(o=$(r.target),(o.attr("class")||"").split(" ").indexOf("ctrl")>=0&&(n.ctrl=o.attr("ctrl"));o&&!o.attr("idx")&&(o=$(o.parent()),"BODY"!==(e=o[0].nodeName)&&"SVG"!==e););return(t=o.attr("idx"))?n.idx=n.chosen=parseInt(t):void 0},move:function(r){var o;return o=n.nodes[n.idx],o&&!n.ctrl&&(o.anchor[0]=r.offsetX,o.anchor[1]=r.offsetY,i()),o&&n.ctrl&&(o["ctrl"+n.ctrl][0]=r.offsetX-o.anchor[0],o["ctrl"+n.ctrl][1]=r.offsetY-o.anchor[1],i()),n.nodes.$save(n.idx)},mup:function(){return n.idx=null,n.ctrl=null},keydown:function(r){var o;return o=r.keyCode||r.which,8===o?(r.preventDefault(),n.remove()):void 0},keypress:function(){}}}));